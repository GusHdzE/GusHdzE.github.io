<!DOCTYPE html>

<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Heroe scape</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="manifest" href="manifest.webmanifest">



  <!-- Hoja de estilos -->
  <link rel="stylesheet" href="materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://unpkg.com/nes.css@2.3.0/css/nes.min.css" rel="stylesheet" />
  <link rel="shortcut icon" href="icon-192x192.png" type="image/png">



  <script src="js/howler.core.js"></script>
  <script src='js/juego.js'></script>
  <style>
    @font-face {
      font-family: "fuente";
      src: url("PressStart2P.woff") format("woff"), url("PressStart2P.ttf") format("truetype")
    }

    body {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      font-family: fuente !important;
      background-image: linear-gradient(161deg, rgba(121, 121, 121, 0.02) 0%, rgba(121, 121, 121, 0.02) 16.667%,rgba(193, 193, 193, 0.02) 16.667%, rgba(193, 193, 193, 0.02) 33.334%,rgba(177, 177, 177, 0.02) 33.334%, rgba(177, 177, 177, 0.02) 50.001000000000005%,rgba(5, 5, 5, 0.02) 50.001%, rgba(5, 5, 5, 0.02) 66.668%,rgba(229, 229, 229, 0.02) 66.668%, rgba(229, 229, 229, 0.02) 83.33500000000001%,rgba(211, 211, 211, 0.02) 83.335%, rgba(211, 211, 211, 0.02) 100.002%),linear-gradient(45deg, rgba(223, 223, 223, 0.02) 0%, rgba(223, 223, 223, 0.02) 14.286%,rgba(70, 70, 70, 0.02) 14.286%, rgba(70, 70, 70, 0.02) 28.572%,rgba(109, 109, 109, 0.02) 28.572%, rgba(109, 109, 109, 0.02) 42.858%,rgba(19, 19, 19, 0.02) 42.858%, rgba(19, 19, 19, 0.02) 57.144%,rgba(180, 180, 180, 0.02) 57.144%, rgba(180, 180, 180, 0.02) 71.42999999999999%,rgba(63, 63, 63, 0.02) 71.43%, rgba(63, 63, 63, 0.02) 85.71600000000001%,rgba(87, 87, 87, 0.02) 85.716%, rgba(87, 87, 87, 0.02) 100.002%),linear-gradient(337deg, rgba(142, 142, 142, 0.02) 0%, rgba(142, 142, 142, 0.02) 20%,rgba(164, 164, 164, 0.02) 20%, rgba(164, 164, 164, 0.02) 40%,rgba(203, 203, 203, 0.02) 40%, rgba(203, 203, 203, 0.02) 60%,rgba(228, 228, 228, 0.02) 60%, rgba(228, 228, 228, 0.02) 80%,rgba(54, 54, 54, 0.02) 80%, rgba(54, 54, 54, 0.02) 100%),linear-gradient(314deg, rgba(187, 187, 187, 0.02) 0%, rgba(187, 187, 187, 0.02) 12.5%,rgba(170, 170, 170, 0.02) 12.5%, rgba(170, 170, 170, 0.02) 25%,rgba(214, 214, 214, 0.02) 25%, rgba(214, 214, 214, 0.02) 37.5%,rgba(187, 187, 187, 0.02) 37.5%, rgba(187, 187, 187, 0.02) 50%,rgba(190, 190, 190, 0.02) 50%, rgba(190, 190, 190, 0.02) 62.5%,rgba(6, 6, 6, 0.02) 62.5%, rgba(6, 6, 6, 0.02) 75%,rgba(206, 206, 206, 0.02) 75%, rgba(206, 206, 206, 0.02) 87.5%,rgba(171, 171, 171, 0.02) 87.5%, rgba(171, 171, 171, 0.02) 100%),linear-gradient(300deg, rgba(243, 243, 243, 0.01) 0%, rgba(243, 243, 243, 0.01) 12.5%,rgba(209, 209, 209, 0.01) 12.5%, rgba(209, 209, 209, 0.01) 25%,rgba(179, 179, 179, 0.01) 25%, rgba(179, 179, 179, 0.01) 37.5%,rgba(3, 3, 3, 0.01) 37.5%, rgba(3, 3, 3, 0.01) 50%,rgba(211, 211, 211, 0.01) 50%, rgba(211, 211, 211, 0.01) 62.5%,rgba(151, 151, 151, 0.01) 62.5%, rgba(151, 151, 151, 0.01) 75%,rgba(16, 16, 16, 0.01) 75%, rgba(16, 16, 16, 0.01) 87.5%,rgba(242, 242, 242, 0.01) 87.5%, rgba(242, 242, 242, 0.01) 100%),linear-gradient(6deg, rgba(31, 31, 31, 0.02) 0%, rgba(31, 31, 31, 0.02) 20%,rgba(193, 193, 193, 0.02) 20%, rgba(193, 193, 193, 0.02) 40%,rgba(139, 139, 139, 0.02) 40%, rgba(139, 139, 139, 0.02) 60%,rgba(14, 14, 14, 0.02) 60%, rgba(14, 14, 14, 0.02) 80%,rgba(122, 122, 122, 0.02) 80%, rgba(122, 122, 122, 0.02) 100%),linear-gradient(279deg, rgba(190, 190, 190, 0.02) 0%, rgba(190, 190, 190, 0.02) 14.286%,rgba(160, 160, 160, 0.02) 14.286%, rgba(160, 160, 160, 0.02) 28.572%,rgba(23, 23, 23, 0.02) 28.572%, rgba(23, 23, 23, 0.02) 42.858%,rgba(60, 60, 60, 0.02) 42.858%, rgba(60, 60, 60, 0.02) 57.144%,rgba(149, 149, 149, 0.02) 57.144%, rgba(149, 149, 149, 0.02) 71.42999999999999%,rgba(4, 4, 4, 0.02) 71.43%, rgba(4, 4, 4, 0.02) 85.71600000000001%,rgba(50, 50, 50, 0.02) 85.716%, rgba(50, 50, 50, 0.02) 100.002%),linear-gradient(109deg, rgba(124, 124, 124, 0.03) 0%, rgba(124, 124, 124, 0.03) 12.5%,rgba(61, 61, 61, 0.03) 12.5%, rgba(61, 61, 61, 0.03) 25%,rgba(187, 187, 187, 0.03) 25%, rgba(187, 187, 187, 0.03) 37.5%,rgba(207, 207, 207, 0.03) 37.5%, rgba(207, 207, 207, 0.03) 50%,rgba(206, 206, 206, 0.03) 50%, rgba(206, 206, 206, 0.03) 62.5%,rgba(118, 118, 118, 0.03) 62.5%, rgba(118, 118, 118, 0.03) 75%,rgba(89, 89, 89, 0.03) 75%, rgba(89, 89, 89, 0.03) 87.5%,rgba(96, 96, 96, 0.03) 87.5%, rgba(96, 96, 96, 0.03) 100%),linear-gradient(329deg, rgba(35, 35, 35, 0.02) 0%, rgba(35, 35, 35, 0.02) 20%,rgba(246, 246, 246, 0.02) 20%, rgba(246, 246, 246, 0.02) 40%,rgba(118, 118, 118, 0.02) 40%, rgba(118, 118, 118, 0.02) 60%,rgba(245, 245, 245, 0.02) 60%, rgba(245, 245, 245, 0.02) 80%,rgba(140, 140, 140, 0.02) 80%, rgba(140, 140, 140, 0.02) 100%),linear-gradient(90deg, hsl(314,0%,31%),hsl(314,0%,31%));
      zoom: 100%;
      background-size: cover;
      background-repeat: no-repeat;
      height: 100vh;
    }

    .nes-progress {
      height: 27px;
    }

    .nes-container.with-title>.title {

      margin: -2.3rem 0 1rem;
    }

    .nes-btn.is-primary {
      
      width: 30%;
    }
  </style>

</head>

<body onload='inicializa();'>

  <!--   <nav class="">
    <div class="nav-wrapper blue-grey">

      <ul id="nav-mobile" class="right hide-on-med-and-down container">
        <li><a onclick="cambiaStilo(1);">Estilo 1</a></li>
        <li><a onclick="cambiaStilo(2);">Estilo 2</a></li>
        <li><a onclick="cambiaStilo(3);">Estilo 3</a></li>
        <li><a class="modal-trigger" href="#modal1">Ayuda</a></li>
      </ul>
    </div>
  </nav> -->

  <div>
    <div class="fixed-action-btn click-to-toggle direction-top" style="position: absolute; right: 24px;">
      <a class="btn-floating btn-large red">
        <i class="material-icons">menu</i>
      </a>
      <ul>
        <li>
          <a href="#modal1" class="btn-floating red modal-trigger"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">help_outline</i>
          </a>
        </li>
        <li>
          <a onclick="cambiaStilo(1);" class="btn-floating   grey  darken-4"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">filter_1</i>
          </a>
        </li>
        <li>
          <a onclick="cambiaStilo(2);" class="btn-floating  grey  darken-4"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">filter_2</i>
          </a>
        </li>
        <li>
          <a onclick="cambiaStilo(3);" class="btn-floating  grey  darken-4"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">filter_3</i>
          </a>
        </li>
        <li>
        <li>
          <a onclick="cambiaStilo(4);" class="btn-floating  grey  darken-4"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">filter_4</i>
          </a>
        </li>
        <li>
          <a onclick="cambiaStilo(5);" class="btn-floating  grey  darken-4"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">filter_5</i>
          </a>
        </li>
        <li>
          <a onclick="cambiaStilo(6);" class="btn-floating  grey  darken-4"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">filter_6</i>
          </a>
        </li>
        <li>
          <a onclick="cambiaStilo(7);" class="btn-floating  grey  darken-4"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">filter_7</i>
          </a>
        </li>
        <li>
          <a onclick="cambiaStilo(8);" class="btn-floating  grey  darken-4"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">filter_8</i>
          </a>
        </li>
        <li>
          <a onclick="cambiaStilo(9);" class="btn-floating  grey  darken-4"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">filter_9</i>
          </a>
        </li>
        <li>
          <a onclick="cambiaStilo( Math.floor(Math.random() * 9));" class="btn-floating  grey  darken-4"
            style="opacity: 1; transform: scale(1) translateY(0px) translateX(0px);">
            <i class="material-icons">shuffle</i>
          </a>
        </li>
      </ul>
    </div>
  </div>



  <br>
  <div class=" container">
    <center>
      <canvas id='canvas' width='750' height='500' class="nes-container is-dark"></canvas>
    </center>


    <div class="row">

      <div class="col s6 m6">
        <div class="card  nes-container is-rounded with-title">
          <p class="title nes-text is-primary">Nivel Actual</p>
          <div class="card-content dark-text">

            <h5 class="center" id="nivel"></h5>
            <progress id="nivelProgress" class="nes-progress is-pattern" value="0" max="9"></progress>
          </div>

        </div>
      </div>
      <div class="col s6 m6">
        <div class="card nes-container is-rounded with-title">
          <p class="title nes-text is-primary">Nivel Alcanzado</p>
          <div class="card-content dark-text">

            <h5 class="center" id="maximo"></h5>
            <progress id="maxProgress" class="nes-progress is-pattern" value="0" max="9"></progress>
          </div>

        </div>
      </div>
    </div>


    <!-- <a class="btn-floating btn-large waves-effect waves-light right green darken-3 modal-trigger" href="#modal1"><i
        class="material-icons">help_outline</i></a> -->

    <div id="botones" style="display: none;">
      <center>
        <div class="row">

          <button type="button" class="nes-btn is-primary " onclick="protagonista.arriba();"><i
              class="material-icons">arrow_upward</i></button>
        </div>
        <div class="row">
          <button type="button" class="nes-btn is-primary" onclick="protagonista.izquierda();"><i
              class="material-icons">arrow_back</i></button>
          <button type="button" class="nes-btn is-disabled" onclick="musica.volume=0;"><i
              class="material-icons">volume_off</i></button>
          <button type="button" class="nes-btn is-primary" onclick="protagonista.derecha();"><i
              class="material-icons">arrow_forward</i></button>
        </div>
        <div class="row">
          <button type="button" class="nes-btn is-primary" onclick="protagonista.abajo();"><i
              class="material-icons">arrow_downward</i></button>
        </div>
      </center>
    </div>

  </div> <!-- finaliza container -->


  <!-- Modal Structure -->
  <div id="modal1" class="modal modal-fixed-footer ">
    <div class="modal-content nes-container  ">
      <center>
        <p>Bienvenido al laberinto!!!</p>
        <br>
      </center>
      <p>Este es un juego de habilidad y aventura. <br>
        Ayuda a nuestro caballero a llegar a la puerta al siguiente nivel ¡pero ojo! para abrirlo tienes que buscar la llave
        que se encuentra protegida por las bestias del laberinto.<br> 
        Para moverte utiliza las flechas del teclado <img src="teclas.png" alt="" width="10%">, o desde tu dispositivo
        movil puedes utilizar los botones tactiles.
      </p>
    </div>
    <div class="modal-footer nes-container">
      <a href="#!" class="modal-close waves-effect waves-green btn-flat">Empezar</a>
    </div>
  </div>




  <!-- script materialize.css -->
  <script src="materialize.min.js"></script>

  <script>
    M.AutoInit();
    document.addEventListener('DOMContentLoaded', function () {
      var elems = document.querySelectorAll('.modal');
      var instances = M.Modal.init(elems);

    });

    document.addEventListener('DOMContentLoaded', function () {
      var elems = document.querySelectorAll('.fixed-action-btn');
      var instances = M.FloatingActionButton.init(elems, {
        direction: 'top'
      });
    });




    navegador = navigator.userAgent; //busco el "userAgent" del usuario.
    //lista de palabras del "userAgent" en los móviles
    moviles = ["Mobile", "iPhone", "iPod", "BlackBerry", "Opera Mini", "Sony", "MOT", "Nokia", "samsung"];
    detector = 0; //Variable que detectará si se usa un móvil
    for (i in moviles) { //comprobar en la lista ...
      //si el método "indexOf" no devuelve -1, indica que la palabra está en el "userAgent"
      compruebo = navegador.indexOf(moviles[i]);
      if (compruebo > -1) {
        detector = 1; //Si es un móvil, cambio el valor del detector
      }
    }
    if (detector == 1) { //si es un móvil redirecciono la página.
      document.getElementById('canvas').style.zoom = "40%";
      document.getElementById('maxProgress').style.zoom = "60%";
      document.getElementById('nivelProgress').style.zoom = "60%";
      document.getElementById('botones').style.display = '';
    }
  </script>

  <script>
    if ('serviceWorker' in navigator) {
      console.log("El Navegador admite service workers");
      window.addEventListener('load', function () {
        //navigator.serviceWorker.register('sw_offlinepage.js')
        //navigator.serviceWorker.register('sw_offlinesite.js')
        navigator.serviceWorker.register(/*'js/sw.js'*/ 'generate-sw.js')

          .then(function (registration) {
            console.log('Service worker registrado de modo correcto');
            console.log('Scope: ' + registration.scope)
          }, function (error) {
            console.log('El registro del Service worker ha fallado');
            console.log(error)
          });
      });
    }
  </script>
</body>

</html>
